/* originally from https://codepen.io/anatectureatwork/pen/VwymwoX?editors=1100 */
$items: 6;

$page-background: #fff;
$line-background: #eee;
$chart-color1: #0076d6; // .bg-blue
$chart-color2: #e66f0e; // .bg-orange
$chart-color3: #538200; // .bg-green
$chart-color4: #676cc8; // .bg-indigo
$chart-color5: #ffbe2e; // .bg-gold
$chart-color6: #e52207; // .bg-red

.legend {
  height: 25px;
  width: 25px;
  background-color: var(--color, currentColor);
  border-radius: 50%;
  display: inline-block;
  vertical-align: middle;
  margin-right: 1rem;
}
.legend.monotone {
  display: none;
}

h4.tooltip {
  position: relative; /* making the .tooltip span a container for the tooltip text */
  padding: 1rem 0rem;
  margin-block-end: 0;
  text-decoration: underline dotted gray; /* little indicater to indicate it's hoverable */
  text-underline-offset: 0.3rem;
}
.tooltip-text {
  /* basic styles */
  min-width: 210px;
  padding: 0.8rem 1.3rem;
  border: 1px solid rgb(0, 95, 158);
  border-radius: 10px;
  background: #eef8ff;
  color: #000;
  text-align: left;
  z-index: 2;
  font-weight: normal;
  font-size: 0.9rem;
  text-decoration: underline dotted #eef8ff;
  text-underline-offset: unset;

  /* display */
  opacity: 0;
  transition: 0.5s opacity;
  //animation: circle 0.5sec ease-in;
  display: none; /* hide by default */
}
.tooltip:hover .tooltip-text,
.tooltip:hover .tooltip-text:before,
.tooltip:hover:after {
  display: block;
  opacity: 1;
}

dl {
  font-size: 0.9rem;
  display: grid;
  grid-template-columns: max-content auto;
}

dt {
  font-weight: bold;
  grid-column-start: 1;
}

dd {
  grid-column-start: 2;
}

.one {
  --color: #{$chart-color1};
}
.two {
  --color: #{$chart-color2};
}
.three {
  --color: #{$chart-color3};
}
.four {
  --color: #{$chart-color4};
}
.five {
  --color: #{$chart-color5};
}
.six {
  --color: #{$chart-color6};
}

.graph circle.one {
  --value: 8;
  --max: 19;
}

.graph circle.two {
  --color: #{$chart-color2};
  --value: 10;
  --max: 20;
}

.graph circle.three {
  --color: #{$chart-color3};
  --value: 4;
  --max: 9;
}

.graph circle.four {
  --color: #{$chart-color4};
  --value: 10;
  --max: 20;
}

.graph circle.five {
  --color: #{$chart-color5};
  --value: 6;
  --max: 10;
}

.graph circle.six {
  --color: #{$chart-color6};
  --value: 7;
  --max: 20;
}
.graph circle.monotone {
  --color: #0050bf;
}
.graph circle.zeroValue {
  --color: #7d7d7d;
  stroke-width: 2px;
  // our background circle has a radius of 50px. When calculating the radius for a wedge, you start with 1/2 the background circle. This is multiplied by the value/max
  r: 15px;
  /* 
   * Comprised of two parts, arc length and circumference. 
   * Arc Length: (1 / number of wedges) * 2 * π * (radius * val/max)
   * Circumference: 2 * π * (radius * val/max)
  */
  stroke-dasharray: calc(0.166666667 * 2 * 3.1415 * 15) calc(2 * 3.1415 * 15);
  animation: circle 2s ease-in-out both;
}

svg {
  width: 12rem;
  height: 12rem;
  transform: rotate(12deg);
}

.background circle {
  fill: $line-background;
  stroke: none;
}

.graph circle {
  fill: none;
  stroke: var(--color, grey);
  stroke-width: calc(25px * (var(--value) / var(--max)) * 2);
  // our background circle has a radius of 50px. When calculating the radius for a wedge, you start with 1/2 the background circle. This is multiplied by the value/max
  r: calc(25px * (var(--value) / var(--max)));
  /* 
   * Comprised of two parts, arc length and circumference. 
   * Arc Length: (1 / number of wedges) * 2 * π * (radius * val/max)
   * Circumference: 2 * π * (radius * val/max)
  */
  stroke-dasharray: calc(
      0.166666667 * 2 * 3.1415 * (25 * (var(--value, 0) / var(--max, 100)))
    )
    calc(2 * 3.1415 * (25 * (var(--value, 0) / var(--max, 100))));
  animation: circle 2s ease-in-out both;
}

@keyframes circle {
  0% {
    opacity: 0;
    stroke-width: 0;
  }
}

@for $i from 1 through $items {
  circle:nth-child(#{$i}) {
    //stroke-dashoffset: #{-1 * ($i - 1)};
    /**
	 * DOES NOT CURRENTLY WORK- would like to push this into SCSS so the transform is not separated from other CSS actions. It currently lives in the HTML
	 * transform: each wedge must be rotated so that they are not all stacked. The 2nd and 3rd arguments denote the x,y coordinates to use when rotating. Values of 10 10 ensure you rotate from center of the circle (as prescribed by your cx cy values).
	 */
    //transform: rotate(#{$i * 60}deg) translateX(50px) translateY(50px);
    animation-delay: #{0.2s * $i};
  }
}
